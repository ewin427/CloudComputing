<!DOCTYPE html>
<html>
  <head>
    <title>Candy Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <h1>Candy Shop</h1>
    <h2>Sales</h2>
    <table id="sales" border="4"></table>

    <script>
      fetch('https://raw.githubusercontent.com/ewin427/CloudComputing/main/Final%20Project/candyshop.json')
        .then(response => response.json())
        .then(data => processData(data));

      function processData(data){
        var obj = data;
      
        quantitys = [3,4,2,1,7]

        text = "<tr><th>Product</th><th>Product Name </th><th>Price </th><th>Quantity </th><th>Total </th></tr>";

        for (let i = 0; i < obj.length; i++) {
          text = text + "<tr>"
          
          if (obj[i].price > 0){
            price = obj[i].price
          }else{
            price = 0
          }

          if (quantitys[i] > 0){
            quantity = quantitys[i]
          }else{
            quantity = 0
          }

          total = price * quantity

          text = text + "<td>" + "<img height=50px width=50px src= 'products/imgs/" + obj[i].thumbnailUrl + "'>" + "</td>"
          text = text + "<td>" + "<a href= 'products/" + obj[i].url + "'>" + obj[i].product_name + "</a>" + "</td>" 
          text = text + "<td>" + price + "</td>"
          text = text + "<td>" + quantity + "</td>"
          text = text + "<td>$" + total.toPrecision(3) + "</td>"
          text = text + "<td>" + obj[i].description + "</td>"
          
          text = text + "</tr>"
        }

        document.getElementById("sales").innerHTML = text
      
      }

    </script>

  </body>
</html>